<div class="product-detail">
  <div class="product-detail__images">
    <div 
      class="product-detail__main-image" 
      (click)="openLightbox()"
      tabindex="0"
      aria-label="Open product image gallery"
      (keydown.enter)="openLightbox()"
      (keydown.space)="openLightbox()"
      title="Click to open image gallery">
      <img [src]="productImages[currentImageIndex].main" [alt]="productImages[currentImageIndex].altText" [title]="productImages[currentImageIndex].altText" class="product-detail__main-image-img">
      <div class="product-detail__image-overlay">
        <span class="product-detail__zoom-text">Click to zoom</span>
      </div>

      <button 
        class="product-detail__nav-arrow product-detail__nav-arrow--prev" 
        (click)="prevImage($event)"
        aria-label="Previous image">
        <img src="/assets/images/icon-previous.svg" alt="" aria-hidden="true">
      </button>
      <button 
        class="product-detail__nav-arrow product-detail__nav-arrow--next" 
        (click)="nextImage($event)"
        aria-label="Next image">
        <img src="/assets/images/icon-next.svg" alt="" aria-hidden="true">
      </button>
    </div>
    <ul class="product-detail__thumbnails" role="listbox" aria-label="Product thumbnails">
      <li 
        *ngFor="let image of productImages; let i = index" 
        class="product-detail__thumbnail" 
        [class.product-detail__thumbnail--active]="i === currentImageIndex"
        (click)="changeImage(i)"
        (keydown.enter)="changeImage(i)"
        (keydown.space)="changeImage(i)"
        tabindex="0"
        role="option"
        [attr.aria-label]="image.altText"
        [attr.aria-selected]="i === currentImageIndex"
        [title]="image.altText">
        <img [src]="image.thumbnail" [alt]="''" aria-hidden="true" class="product-detail__thumbnail-img">
      </li>
    </ul>
  </div>
  
  <div class="product-detail__info" role="region" aria-label="Product information">
    <div class="product-detail__company" aria-label="Brand">SNEAKER COMPANY</div>
    <h1 class="product-detail__title">Fall Limited Edition Sneakers</h1>
    <p class="product-detail__description">
      These low-profile sneakers are your perfect casual wear companion. Featuring a 
      durable rubber outer sole, they'll withstand everything the weather can offer.
    </p>
    
    <div class="product-detail__price" role="region" aria-label="Product pricing">
      <div class="product-detail__current-price">
        <span class="product-detail__price-value" aria-label="Current price: $125.00">$125.00</span>
        <span class="product-detail__discount" aria-label="Discount percentage">50%</span>
      </div>
      <div class="product-detail__original-price" aria-label="Original price: $250.00">$250.00</div>
    </div>
    
    <div class="product-detail__actions" role="region" aria-label="Product actions">
      <div class="product-detail__quantity" role="group" aria-label="Quantity selector">
        <button 
          class="product-detail__quantity-btn product-detail__quantity-btn--minus" 
          (click)="decreaseQuantity()"
          aria-label="Decrease quantity"
          [attr.aria-disabled]="quantity < 1">
          <img src="/assets/images/icon-minus.svg" alt="" aria-hidden="true">
        </button>
        <span class="product-detail__quantity-value" aria-live="polite" [attr.aria-label]="'Quantity: ' + quantity">{{ quantity }}</span>
        <button 
          class="product-detail__quantity-btn product-detail__quantity-btn--plus" 
          (click)="increaseQuantity()"
          aria-label="Increase quantity">
          <img src="/assets/images/icon-plus.svg" alt="" aria-hidden="true">
        </button>
      </div>
      
      <button 
        class="product-detail__add-btn" 
        (click)="addToCart()"
        [attr.aria-label]="'Add ' + quantity + ' items to cart for $' + (125.00 * quantity | number:'1.2-2')">
        <img src="/assets/images/icon-cart.svg" alt="" aria-hidden="true">
        Add to cart
      </button>
    </div>
  </div>
  
  <app-lightbox 
    [isOpen]="isLightboxOpen" 
    [images]="productImages" 
    [currentIndex]="currentImageIndex" 
    (close)="closeLightbox()">
  </app-lightbox>
</div>
